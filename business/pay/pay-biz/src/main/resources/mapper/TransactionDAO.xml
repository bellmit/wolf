<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="study.daydayup.wolf.business.pay.biz.dal.dao.TransactionDAO">


<!--auto generated by MybatisCodeHelper on 2020-06-22-->
    <select id="selectByPaymentNoAndPayeeId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from transaction
        where payment_no=#{paymentNo,jdbcType=VARCHAR}
        and payee_id=#{payeeId,jdbcType=BIGINT}
        order by id desc
    </select>

<!--auto generated by MybatisCodeHelper on 2020-06-22-->
    <select id="selectBySettlementNoAndPayeeId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from transaction
        where settlement_no=#{settlementNo,jdbcType=VARCHAR}
        and payee_id=#{payeeId,jdbcType=BIGINT}
        <if test="transactionType != null">
            and transaction_type = #{transactionType,jdbcType=TINYINT}
        </if>
        order by id desc
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-06-21-->
    <select id="selectByRange" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from transaction
        where payee_id=#{query.payeeId,jdbcType=BIGINT}
        <if test="query.transactionType != null">
            and transaction_type = #{query.transactionType,jdbcType=TINYINT}
        </if>
        <if test="query.createdAfter != null">
            <![CDATA[ and created_at >= #{query.createdAfter,jdbcType=TIMESTAMP} ]]>
        </if>
        <if test="query.createdBefore != null">
            <![CDATA[ and created_at <= #{query.createdBefore,jdbcType=TIMESTAMP} ]]>
        </if>
        ORDER BY id desc
    </select>
</mapper>