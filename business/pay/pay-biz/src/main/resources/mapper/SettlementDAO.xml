<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="study.daydayup.wolf.business.pay.biz.dal.dao.SettlementDAO">


<!--auto generated by MybatisCodeHelper on 2020-06-22-->
    <select id="selectBySettlementNoAndAccountId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from settlement
        where settlement_no=#{settlementNo,jdbcType=VARCHAR}
        and account_id=#{accountId,jdbcType=BIGINT}
        limit 1
    </select>

    <!--auto generated by MybatisCodeHelper on 2020-06-21-->
    <select id="selectByRange" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from settlement
        where account_id=#{query.accountId,jdbcType=BIGINT}
        <if test="query.settlementType != null">
            and settlement_type = #{query.settlementType,jdbcType=TINYINT}
        </if>
        <if test="query.state != null">
            and state = #{query.state,jdbcType=TINYINT}
        </if>
        <if test="query.createdAfter != null">
            <![CDATA[ and created_at >= #{query.createdAfter,jdbcType=TIMESTAMP} ]]>
        </if>
        <if test="query.createdBefore != null">
            <![CDATA[ and created_at <= #{query.createdBefore,jdbcType=TIMESTAMP} ]]>
        </if>
        ORDER BY id desc
    </select>
</mapper>